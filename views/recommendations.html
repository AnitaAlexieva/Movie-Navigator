{% extends "base.html" %}
{% block content %}
<h2>üéØ –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ —Ñ–∏–ª–º–∏</h2>

{% if recommendations %}
<div class="recommendations">
    {% for movie in recommendations %}
        <div class="movie-card">
            {% if movie.poster_url %}
                <img src="{{ movie.poster_url }}" alt="{{ movie.title }}">
            {% else %}
                <img src="/static/no-poster.png" alt="–ù—è–º–∞ —Å–Ω–∏–º–∫–∞">
            {% endif %}
            <h4>{{ movie.title }}</h4>
            <p><strong>–ñ–∞–Ω—Ä:</strong> {{ movie.genre }} | {{ movie.year }}<br>‚≠ê {{ movie.rating }}</p>
            <div class="buttons">
                <form action="/recommendations" method="post">
                    <input type="hidden" name="movie_id" value="{{ movie.id }}">
                    <button type="submit">–û—â–µ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏</button>
                </form>
                <button type="button" class="add-list-btn" data-movie-id="{{ movie.id }}" onclick="openModal('{{ movie.id }}')">
                    ‚ûï –î–æ–±–∞–≤–∏ –≤ —Å–ø–∏—Å—ä–∫
                </button>
            </div>
        </div>
    {% endfor %}
</div>
{% else %}
<p>‚ùó –ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –≤ –º–æ–º–µ–Ω—Ç–∞.</p>
{% endif %}  <!-- üëà —Ç–æ–≤–∞ –ª–∏–ø—Å–≤–∞—à–µ -->

<!-- Modal –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Ñ–∏–ª–º –≤ —Å–ø–∏—Å—ä–∫ -->
<div id="listModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">√ó</span>
        <h3>–î–æ–±–∞–≤–∏ —Ñ–∏–ª–º –≤ —Å–ø–∏—Å—ä–∫</h3>
        <input type="hidden" id="modal_movie_id">

        <div id="existing-lists">
            <h4>üìã –ò–∑–±–µ—Ä–∏ —Å–ø–∏—Å—ä–∫:</h4>
            <div id="lists-container"></div>
        </div>

        <div id="new-list">
            <h4>‚ûï –ò–ª–∏ —Å—ä–∑–¥–∞–π –Ω–æ–≤ —Å–ø–∏—Å—ä–∫:</h4>
            <input type="text" id="new_list_name" placeholder="–ò–º–µ –Ω–∞ —Å–ø–∏—Å—ä–∫–∞">
            <input type="text" id="new_list_description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–ø–æ –∏–∑–±–æ—Ä)">
            <button onclick="createListAndAddMovie()">–°—ä–∑–¥–∞–π –∏ –¥–æ–±–∞–≤–∏</button>
        </div>
    </div>
</div>

<script>
function closeModal() {
    document.getElementById("listModal").style.display = "none";
}
</script>

{% endblock %}
