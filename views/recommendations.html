{% extends "base.html" %}
{% block content %}
<h2>üéØ –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ —Ñ–∏–ª–º–∏</h2>

{% if recommendations %}
<div class="recommendations">
    {% for movie in recommendations %}
        <div class="movie-card">
            {% if movie.poster_url %}
                <img src="{{ movie.poster_url }}" alt="{{ movie.title }}">
            {% else %}
                <img src="/static/no-poster.png" alt="–ù—è–º–∞ —Å–Ω–∏–º–∫–∞">
            {% endif %}
            <h4>{{ movie.title }}</h4>
            <p><strong>–ñ–∞–Ω—Ä:</strong> {{ movie.genre }} | {{ movie.year }}<br>‚≠ê {{ movie.rating }}</p>
            <form action="/recommendations" method="post">
                <input type="hidden" name="movie_id" value="{{ movie.id }}">
                <button type="submit">–û—â–µ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏</button>
            </form>
                <button type="button" class="add-list-btn" data-movie-id="{{ movie.id }}" onclick="openModal('{{ movie.id }}')">
        ‚ûï –î–æ–±–∞–≤–∏ –≤ —Å–ø–∏—Å—ä–∫
    </button>
        </div>
        {% endfor %}
 </div>
 <!-- Modal –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Ñ–∏–ª–º –≤ —Å–ø–∏—Å—ä–∫ -->
<div id="listModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
    background-color: rgba(0,0,0,0.6); z-index:9999;">

    <div style="background:white; width:300px; margin:10% auto; padding:20px; border-radius:10px; text-align:center;">
        <span style="float:right; cursor:pointer;" onclick="closeModal()">√ó</span>
        <h3>–î–æ–±–∞–≤–∏ —Ñ–∏–ª–º –≤ —Å–ø–∏—Å—ä–∫</h3>
        <input type="hidden" id="modal_movie_id">

        <div id="existing-lists">
            <h4>–ò–∑–±–µ—Ä–∏ —Å–ø–∏—Å—ä–∫:</h4>
            <div id="lists-container"></div>
        </div>

        <div id="new-list">
            <h4>–ò–ª–∏ —Å—ä–∑–¥–∞–π –Ω–æ–≤ —Å–ø–∏—Å—ä–∫:</h4>
            <input type="text" id="new_list_name" placeholder="–ò–º–µ –Ω–∞ —Å–ø–∏—Å—ä–∫–∞">
            <input type="text" id="new_list_description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–ø–æ –∏–∑–±–æ—Ä)">
            <button onclick="createListAndAddMovie()">–°—ä–∑–¥–∞–π –∏ –¥–æ–±–∞–≤–∏</button>
        </div>
    </div>
</div>

</div>
{% else %}
<p style="text-align:center;">üòï –ù—è–º–∞ –ø—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ —Ñ–∏–ª–º–∏ –∑–∞ –º–æ–º–µ–Ω—Ç–∞.</p>
{% endif %}

<div class="center-btn">
    <a href="/movies" class="btn">‚¨ÖÔ∏è –û–±—Ä–∞—Ç–Ω–æ</a>
</div>
    <script>
    function closeModal() {
        document.getElementById("listModal").style.display = "none";
    }
    </script>
{% endblock %}